{% extends "common/base.html" %}
{% load phone_filters %}

{% block title %}{{ caretaker.name }}{% endblock %}

{% block content %}
  <div class="row g-4">
    <div class="col-lg-4">
      <div class="card shadow-sm">
        <img
          src="{{ caretaker.image_url }}"
          class="card-img-top"
          alt="{{ caretaker.name }}"
          style="height: 320px; object-fit: cover;"
        />
      </div>
    </div>
    <div class="col-lg-8">
      <div class="d-flex align-items-start justify-content-between mb-3">
        <div>
          <h1 class="h3 mb-1">{{ caretaker.name }}</h1>
          <div class="text-muted">{{ caretaker.display_title }}</div>
        </div>
        <div>
          <a class="btn btn-sm btn-secondary" href="{% url 'caretaker-edit' caretaker.id %}">Edit caretaker</a>
        </div>
      </div>
      <div class="mb-3">
        <div class="small text-muted">Email: {{ caretaker.email }}</div>
        <div class="small text-muted">Phone: {{ caretaker.phone_number|format_phone }}</div>
      </div>
      <div class="mt-3">
        <div class="small text-uppercase text-muted fw-semibold mb-2">Shelters</div>
        {% if shelters %}
          <div class="d-flex flex-wrap gap-2">
            {% for shelter in shelters %}
              <a class="badge text-bg-light border text-decoration-none text-reset" href="{% url 'shelter-detail' shelter.id %}">{{ shelter.name }}</a>
            {% endfor %}
          </div>
        {% else %}
          <div class="text-muted small">No shelters assigned yet.</div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="mt-4">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <h2 class="h5 mb-0">Assigned pets</h2>
      <a class="btn btn-sm btn-secondary" href="/accounts/caretakers/{{ caretaker.id }}/assign-pets/">Assign pets</a>
    </div>
    {% include "common/card_grid.html" with items=pets card_template="pets/_card.html" empty_message="No pets assigned yet." %}
  </div>
{% endblock %}
